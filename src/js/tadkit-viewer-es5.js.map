{"version":3,"sources":["tadkit-viewer-es5.js"],"names":["TADkitViewer","is","properties","previews","type","Array","observer","color","String","value","options","Object","viewer","unloadObj","isTADkitViewerReady","preview","selectedPreview","length","selectedIndex","getPreviewPath","index","render","resize","loadObject","currentModelUrl","fileExtension","startRotating","changeColor","setLoadingFileErrorMessage","stopRotating","loadingMessage","LOADING_ERROR","prev","set","indexOf","file_type","file_url","setTimeout","renderModel","Viewer","init","Polymer"],"mappings":"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","file":"tadkit-viewer-es5.js","sourcesContent":["'use strict';\n\nclass TADkitViewer {\n    get LOADING_ERROR() {\n        return 'Could not load file.';\n    }\n\n    beforeRegister() {\n        this.is = 'tadkit-viewer';\n        this.properties = {\n            previews: {\n                type: Array,\n                observer: 'previewsChanged'\n            },\n            color: {\n                type: String,\n                value: 'cccccc',\n                observer: '_changeModelColor'\n            },\n            options: {\n                type: Object,\n                value: () => {\n                    return {};\n                }\n            }\n        };\n    }\n\n    unloadObj() {\n        this.viewer.unloadObj();\n        this.isTADkitViewerReady = false;\n    }\n\n    showPreview(preview) {\n        return this.selectedPreview === preview;\n    }\n\n    showViewerArrows(previews) {\n        return previews && previews.length > 1;\n    }\n\n    showPreviousPreview() {\n        this.unloadObj();\n        this.selectedIndex = (this.selectedIndex - 1) % this.previews.length;\n        if (this.selectedIndex < 0) {\n            this.selectedIndex = this.previews.length - 1;\n        }\n        this.getPreviewPath(this.previews[this.selectedIndex]);\n    }\n\n    showNextPreview() {\n        this.unloadObj();\n        this.selectedIndex = (this.selectedIndex + 1) % this.previews.length;\n        this.getPreviewPath(this.previews[this.selectedIndex]);\n    }\n\n    renderModel(index) {\n        //index = index || 0;\n        this.viewer.render('#tadkit-viewer');\n        this.viewer.resize();\n        this.viewer.loadObject(this.currentModelUrl, this.fileExtension, () => {\n            this.isTADkitViewerReady = true;\n            this.viewer.startRotating();\n            this.viewer.changeColor(this.color);\n        }, () => {\n            this.setLoadingFileErrorMessage();\n            this.viewer.stopRotating();\n            this.isTADkitViewerReady = false;\n        });\n    }\n\n    computeErrorClass(loadingMessage) {\n        return loadingMessage === this.LOADING_ERROR ? 'error' : '';\n    }\n\n    getPreviewPath(prev) {\n        this.set('loadingMessage', 'Loading...');\n        let preview = prev || this.previews[0];\n        this.selectedPreview = preview;\n        this.selectedIndex = this.previews.indexOf(preview);\n\n        this.fileExtension = preview.file_type;\n        this.currentModelUrl = preview.file_url;\n        setTimeout(() => {\n            this.renderModel();\n        });\n    }\n\n    setLoadingFileErrorMessage() {\n        this.set('loadingMessage', this.LOADING_ERROR);\n    }\n\n    previewsChanged() {\n        if (this.previews && this.previews.length > 0) {\n            this.isTADkitViewerReady = false;\n            this.getPreviewPath();\n        }\n    }\n\n    ready() {\n        this.viewer = new Viewer();\n        this.viewer.init();\n\n    }\n\n    _changeModelColor() {\n        if (this.viewer) {\n            this.viewer.changeColor(this.color);\n        }\n    }\n}\n\nPolymer(TADkitViewer);\n"]}